'use strict';(function(){var _this=this;window.xs=window.innerWidth<=1024?true:false;window.mobile=window.innerWidth<=480?true:false;window.xsHeight=window.innerHeight<=540?true:false;window.touch=document.querySelector('html').classList.contains('touchevents');window.animation={};window.animation.fadeIn=function(elem,ms,cb){var d=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'block';if(!elem)return;elem.style.opacity=0;elem.style.display=d;if(ms){var opacity=0;var timer=setInterval(function(){opacity+=50/ms;if(opacity>=1){clearInterval(timer);opacity=1;if(cb)cb()}elem.style.opacity=opacity},50)}else{elem.style.opacity=1;if(cb)cb()}};window.animation.fadeOut=function(elem,ms,cb){if(!elem)return;elem.style.opacity=1;if(ms){var opacity=1;var timer=setInterval(function(){opacity-=50/ms;if(opacity<=0){clearInterval(timer);opacity=0;elem.style.display='none';if(cb)cb()}elem.style.opacity=opacity},50)}else{elem.style.opacity=0;elem.style.display='none';if(cb)cb()}};window.animation.scrollTo=function(to,duration){if(duration<=0)return;var element=document.documentElement,difference=to-element.scrollTop,perTick=difference/duration*10;setTimeout(function(){element.scrollTop=element.scrollTop+perTick;window.animation.scrollTo(to,duration-10)},10)};window.animation.visChecker=function(el){var rect=el.getBoundingClientRect();return(//rect.top >= 0 &&
//rect.left >= 0 &&
rect.bottom-el.offsetHeight*.35<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth))};window.agroculture={};window.agroculture.form={init:function init(){var _th=this,inputs=document.querySelectorAll('.common__input, .common__textarea'),forms=document.querySelectorAll('form'),selectors=document.querySelectorAll('.js-select'),choicesArr=[],digitsInput=document.querySelectorAll('.js-digits');$('.js-phone').mask('+7(999) 999-9999');function emptyCheck(event){event.target.value.trim()===''?event.target.classList.remove('notempty'):event.target.classList.add('notempty')}inputs.forEach(function(item){item.addEventListener('keyup',emptyCheck);item.addEventListener('blur',emptyCheck)});if(document.querySelectorAll('.js-common-file').length){var commonFile=document.querySelectorAll('.js-common-fileinput'),commonFileDelete=document.querySelectorAll('.js-common-filedelete');commonFile.forEach(function(fileInp){fileInp.addEventListener('change',function(e){var el=fileInp.nextElementSibling,path=fileInp.value.split('\\'),pathName=path[path.length-1].split('');pathName.length>=30?pathName=pathName.slice(0,28).join('')+'...':pathName=pathName.join('');el.textContent=pathName;el.classList.add('choosed')})});commonFileDelete.forEach(function(fileDelete){fileDelete.addEventListener('click',function(e){var el=fileDelete.previousElementSibling,fileInput=fileDelete.previousElementSibling.previousElementSibling;el.textContent=el.getAttribute('data-default');fileInput.value='';el.classList.remove('choosed')})})}forms.forEach(function(form){form.addEventListener('submit',function(e){return!_th.checkForm(form)&&e.preventDefault()&&e.stopPropagation()})});var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=selectors[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var selector=_step.value;var choice=new Choices(selector,{searchEnabled:false,itemSelectText:'',position:'bottom'});choicesArr.push(choice)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=digitsInput[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var digitInput=_step2.value;digitInput.addEventListener('keydown',function(e){var validArr=[46,8,9,27,13,110,190];if(validArr.indexOf(e.keyCode)!==-1||e.keyCode==65&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode==67&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode==88&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode>=35&&e.keyCode<=39){return}if((e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)){e.preventDefault()}})}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}return this},checkForm:function checkForm(form){var checkResult=true;var warningElems=form.querySelectorAll('.warning');if(warningElems.length)warningElems.forEach(function(warningElem){return warningElem.classList.remove('warning')});form.querySelectorAll('input, textarea, select').forEach(function(elem){if(elem.getAttribute('data-req')){switch(elem.getAttribute('data-type')){case'tel':var re=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;if(!re.test(elem.value)){elem.classList.add('warning');checkResult=false}break;case'email':var re=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(!re.test(elem.value)){elem.classList.add('warning');checkResult=false}break;case'file':if(elem.value.trim()===''){elem.parentNode.classList.add('warning');checkResult=false}break;default:if(elem.value.trim()===''){elem.classList.add('warning');checkResult=false}break;}}});form.querySelectorAll('input[name^=agreement]').forEach(function(item){if(!item.checked){item.classList.add('warning');checkResult=false}});return checkResult}}.init();window.agroculture.obj={progressUpdate:function progressUpdate(val){var progressEl=document.querySelector('.js-progress');progressEl.style.width=val+'%'},indexVertCarousel:function indexVertCarousel(){var headerEl=document.querySelector('.header'),bodyEl=document.querySelector('body'),carElemCount=document.querySelector('.js-icar .swiper-wrapper').children.length,areaOverEl=document.querySelector('.js-area-over'),_self=_this;var bodyElColor=bodyEl.getAttribute('data-color');if(window.xs&&window.touch){document.querySelector('.js-icar .swiper-no-swiping').classList.remove('swiper-no-swiping')}var mainVertSwiper=new Swiper('.js-icar',{speed:1500,direction:'vertical',slidesPerView:1,spaceBetween:0,mousewheel:{releaseOnEdges:true},allowTouchMove:window.xs&&window.touch});mainVertSwiper.on('slideChangeTransitionStart',function(){if(this.activeIndex){headerEl.classList.add('hidden');window.agroculture.obj.progressUpdate(Math.floor((this.activeIndex+1)*100/carElemCount))}else{headerEl.classList.remove('hidden');window.agroculture.obj.progressUpdate(0)}if(areaOverEl&&this.activeIndex!==1){areaOverEl.classList.remove('changed')}var slideColor=this.slides[this.activeIndex].getAttribute('data-color');if(slideColor!=bodyElColor){bodyElColor=slideColor;bodyEl.setAttribute('data-color',slideColor)}})},indexBannerCarousel:function indexBannerCarousel(){var toggleHiddens=document.querySelectorAll('.js-area-toggler'),toggleOver=document.querySelector('.js-area-over');var bannerSwiper=new Swiper('.js-ibanner',{loop:false,speed:800,slidesPerView:1,spaceBetween:0,parallax:true,navigation:{nextEl:'.js-ibanner .swiper-button-next',prevEl:'.js-ibanner .swiper-button-prev'},autoplay:{delay:5000}});var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=toggleHiddens[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var toggleButton=_step3.value;toggleButton.addEventListener('click',function(){toggleOver.classList.toggle('changed')})}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}},indexShowMap:function indexShowMap(){var mapButton=document.querySelector('.js-mapshower'),mapAreaOver=document.querySelector('.js-slide-mapper'),roadBack=document.querySelector('.js-iroad-back');function init(){var multiRoute=new ymaps.multiRouter.MultiRoute({referencePoints:[[55.727888,37.564603],[54.832774,38.294106]],params:{results:1}},{boundsAutoApply:false});var myMap=new ymaps.Map('iroad-map',{center:[55.051641,38.714763],zoom:9,controls:[]});myMap.controls.add('zoomControl');myMap.geoObjects.add(multiRoute);myMap.behaviors.disable('scrollZoom')}function wantInit(){mapButton.addEventListener('click',function(){mapAreaOver.classList.toggle('showmap');init()});roadBack.addEventListener('click',function(){mapAreaOver.classList.toggle('showmap')})}ymaps.ready(wantInit)},contactsMap:function contactsMap(){function init(){var myMap=new ymaps.Map('contacts-map',{center:[54.830497,38.306856],zoom:window.innerWidth<=1000?13:15,controls:['smallMapDefaultSet']});var myPlacemark=new ymaps.Placemark([54.82841,38.289115],{},{preset:'islands#redIcon',iconColor:'#ff3f33'});var myPlacemark2=new ymaps.Placemark([54.827684,38.321429],{},{preset:'islands#redIcon',iconColor:'#ff3f33'});myMap.behaviors.disable('scrollZoom');myMap.geoObjects.add(myPlacemark).add(myPlacemark2)}ymaps.ready(init)},indexVegetables:function indexVegetables(){var vegHrefs=document.querySelectorAll('.js-iveg-href'),vegOver=document.querySelector('.iveg__over'),backHrefs=document.querySelectorAll('.js-iveg-back');var step=0,vegBlock=void 0,vegEl=void 0,startDot=void 0,endDot=void 0,startDistance=void 0,clientX=0,vegWidth=void 0,vegFrames=void 0,vegFrameHeight=void 0,startWatcher=false,vegStepEnd=false;var vegToStart=function vegToStart(curSlide){if(curSlide===0)return;curSlide--;vegEl.style.backgroundPositionY='-'+curSlide*vegFrameHeight+'px';setTimeout(function(){vegToStart(curSlide)},10)};var dotListener=function dotListener(event){if(startWatcher){startDot.style.left=event.clientX-startDot.parentNode.offsetLeft-startDot.offsetWidth/2+'px';startDot.style.top=event.clientY-startDot.parentNode.offsetTop-startDot.offsetHeight/2+'px';var distance=Math.sqrt(Math.pow(endDot.offsetLeft-startDot.offsetLeft,2)+Math.pow(endDot.offsetTop-startDot.offsetTop,2));var percent=Math.floor((startDistance-distance)*100/startDistance)+5;if(percent<0){percent=0}if(percent>100){percent=100;vegStepEnd=true;startDot.style.left=endDot.offsetLeft+'px';startDot.style.top=endDot.offsetTop+'px';['mousemove','touchmove'].forEach(function(e){startDot.parentNode.removeEventListener(e,dotListener)})}var newSlide=Math.floor(vegFrames*percent/100);vegEl.style.backgroundPositionY='-'+newSlide*vegFrameHeight+'px'}};var interactiveEnd=function interactiveEnd(){if(!vegStepEnd){vegToStart(Math.abs(parseInt(getComputedStyle(vegEl)['backgroundPositionY']))/vegFrameHeight);startDot.removeAttribute('style')}else{step++;vegBlock.classList.add('step2-starter');setTimeout(function(){vegBlock.classList.remove('step2-starter');vegBlock.classList.add('step2');setTimeout(function(){startDot.removeAttribute('style')},700)},700);docListenerRemove()}startWatcher=false};var watcherSetter=function watcherSetter(e){if(e.target.classList.contains('js-iveg-start')){startWatcher=true}};var docListenerRemove=function docListenerRemove(){['mousedown','touchstart'].forEach(function(e){document.removeEventListener(e,watcherSetter)});['mousemove','touchmove'].forEach(function(e){startDot.parentNode.removeEventListener(e,dotListener)});['mouseup','touchend'].forEach(function(e){document.removeEventListener(e,interactiveEnd)})};var docListener=function docListener(){['mousedown','touchstart'].forEach(function(e){document.addEventListener(e,watcherSetter)});['mousemove','touchmove'].forEach(function(e){startDot.parentNode.addEventListener(e,dotListener)});['mouseup','touchend'].forEach(function(e){document.addEventListener(e,interactiveEnd)})};// && window.touch
if(!window.xs){var _loop=function _loop(vegHref){vegHref.addEventListener('click',function(e){var hrefType=vegHref.getAttribute('data-type');vegBlock=document.querySelector('.iveg__type[data-type="'+hrefType+'"]');vegEl=vegBlock.querySelector('.iveg__type-anim');startDot=vegBlock.querySelector('.js-iveg-start');endDot=vegBlock.querySelector('.js-iveg-end');startDistance=Math.sqrt(Math.pow(endDot.offsetLeft-startDot.offsetLeft,2)+Math.pow(endDot.offsetTop-startDot.offsetTop,2));vegWidth=vegEl.clientWidth;vegFrames=vegEl.getAttribute('data-frames');vegFrameHeight=vegEl.getAttribute('data-frameheight');docListener();vegOver.classList.add('hide');setTimeout(function(){vegOver.classList.add('absolute');vegBlock.classList.remove('absolute','hide');step++},700);e.preventDefault()})};var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=vegHrefs[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var vegHref=_step4.value;_loop(vegHref)}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=backHrefs[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var backHref=_step5.value;backHref.addEventListener('click',function(e){if(step===1){vegBlock.classList.add('hide');setTimeout(function(){vegBlock.classList.add('absolute');vegOver.classList.remove('absolute','hide');docListenerRemove();step--},700)}if(step===2){step--;vegBlock.classList.add('step1-starter');setTimeout(function(){vegBlock.classList.remove('step1-starter');vegBlock.classList.remove('step2')},700);vegToStart(vegFrames);docListener();vegStepEnd=false}})}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}}},catalogCars:function catalogCars(){var catalogCars=document.querySelectorAll('.js-catalog-car'),headerEl=document.querySelector('.header'),bodyEl=document.querySelector('body'),carElemCount=document.querySelector('.js-car .swiper-wrapper').children.length,hrefToSlide=document.querySelectorAll('.js-catalog-toslide');var bodyElColor=bodyEl.getAttribute('data-color');catalogCars.forEach(function(item){var parentSlide=item.closest('.swiper-slide'),carElemCount=item.querySelector('.swiper-wrapper').children.length;var bannerSwiper=new Swiper(item,{loop:carElemCount>1?true:false,speed:800,slidesPerView:2,spaceBetween:42,navigation:{nextEl:parentSlide.querySelector('.swiper-button-next'),prevEl:parentSlide.querySelector('.swiper-button-prev')},breakpoints:{960:{slidesPerView:1}},allowTouchMove:window.xs&&window.touch})});var carVertSwiper=new Swiper('.js-car',{speed:1500,direction:'vertical',slidesPerView:1,spaceBetween:-1,mousewheel:{releaseOnEdges:true},allowTouchMove:window.xs&&window.touch});carVertSwiper.on('slideChangeTransitionStart',function(){if(this.activeIndex){headerEl.classList.add('hidden');window.agroculture.obj.progressUpdate(Math.floor((this.activeIndex+1)*100/carElemCount))}else{headerEl.classList.remove('hidden');window.agroculture.obj.progressUpdate(0)}var slideColor=this.slides[this.activeIndex].getAttribute('data-color');if(slideColor!=bodyElColor){bodyElColor=slideColor;bodyEl.setAttribute('data-color',slideColor)}});hrefToSlide.forEach(function(item){item.addEventListener('click',function(){var type=item.getAttribute('data-type'),slideIndex=$('.js-car .swiper-slide[data-slide="'+type+'"]').index();carVertSwiper.slideTo(slideIndex,1500)})})},catalogVegetables:function catalogVegetables(){var hrefs=document.querySelectorAll('.js-catalog-toslide'),vegs=document.querySelectorAll('.js-catalog-veg');var _loop2=function _loop2(href){href.addEventListener('mouseover',function(){var curType=href.getAttribute('data-type');vegs.forEach(function(item){return item.classList.remove('hidden')});vegs.forEach(function(item){if(item.getAttribute('data-type')!==curType){item.classList.add('hidden')}})});href.addEventListener('mouseout',function(){vegs.forEach(function(item){return item.classList.remove('hidden')})})};var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=hrefs[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var href=_step6.value;_loop2(href)}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}},resizeWatcher:function resizeWatcher(){var tableSel=document.querySelectorAll('table'),scrollArray=[];if(tableSel.length){tableSel.forEach(function(item,i){var orgHtml=item.outerHTML,def='default';if(item.getAttribute('class'))def='';item.outerHTML='<div class=\'table-scroller'+i+' '+def+'\'>'+orgHtml+'</div>';var ps=new PerfectScrollbar('.table-scroller'+i,{wheelPropagation:true});scrollArray.push(ps)});window.addEventListener('resize',function(){if(scrollArray.length)scrollArray.forEach(function(item,i){item.update()})})}},aboutCar:function aboutCar(){var personalSwiper=new Swiper('.js-about-car',{loop:true,speed:800,slidesPerView:1,spaceBetween:0,navigation:{nextEl:'.js-about-car ~ .swiper-buttons .swiper-button-next',prevEl:'.js-about-car ~ .swiper-buttons .swiper-button-prev'},breakpoints:{960:{autoHeight:true}}})},aboutLines:function aboutLines(){var lines=document.querySelectorAll('.js-about-line'),koef=.45;lines.forEach(function(line){line.setAttribute('data-width',getComputedStyle(line)['background-position'].split('px ')[0])});window.addEventListener('scroll',function(){lines.forEach(function(line){var rect=line.getBoundingClientRect();if(rect.top+258>=0&&rect.bottom-258<=(window.innerHeight||document.documentElement.clientHeight)){var diff=rect.bottom-258-(window.innerHeight||document.documentElement.clientHeight);if(line.getAttribute('data-reverse')){line.style.backgroundPositionX=+line.getAttribute('data-width')-diff*koef+'px'}else{line.style.backgroundPositionX=+line.getAttribute('data-width')+diff*koef+'px'}}})})},aboutTheatre:function aboutTheatre(){var tabs=document.querySelectorAll('.js-about-tab'),cars=document.querySelectorAll('.about__cars-truck');var _loop3=function _loop3(tab){tab.addEventListener('click',function(e){if(tab.classList.contains('active')){e.preventDefault();return}var curTab=document.querySelector('.js-about-tab.active'),curTabYear=curTab.getAttribute('data-year'),newTabYear=tab.getAttribute('data-year'),curInfoTab=document.querySelector('.about__cars-infotab[data-year="'+curTabYear+'"]'),newInfoTab=document.querySelector('.about__cars-infotab[data-year="'+newTabYear+'"]');var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=cars[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var car=_step8.value;var carYear=car.getAttribute('data-year');if(+carYear>+newTabYear){window.animation.fadeOut(car,200)}else if(car.offsetParent===null){window.animation.fadeIn(car,200)}}}catch(err){_didIteratorError8=true;_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return()}}finally{if(_didIteratorError8){throw _iteratorError8}}}window.animation.fadeOut(curInfoTab,200,function(){window.animation.fadeIn(newInfoTab,200,function(){},'flex')});curTab.classList.remove('active');tab.classList.add('active');e.preventDefault()})};var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=tabs[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var tab=_step7.value;_loop3(tab)}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}},init:function init(){var burgerEl=document.querySelector('.js-burger'),html=document.querySelector('html'),elemsToCheck=['.news__grid_page .news__elem-imgover','.js-scroll-imgover','.about__steps-elem'];burgerEl.addEventListener('click',function(e){html.classList.toggle('burgeropen');if(burgerEl.classList.contains('open')){burgerEl.classList.add('remove');setTimeout(function(){burgerEl.classList.remove('open','remove')},1000)}else{burgerEl.classList.add('open')}e.preventDefault()});if(document.querySelector('.js-icar'))this.indexVertCarousel();if(document.querySelector('.js-ibanner'))this.indexBannerCarousel();if(document.querySelector('.js-mapshower'))this.indexShowMap();if(document.querySelector('.js-iveg-href'))this.indexVegetables();if(!window.mobile&&document.querySelector('.js-catalog-veg'))this.catalogVegetables();if(document.querySelector('.js-catalog-car'))this.catalogCars();if(document.querySelector('.js-contacts-map'))this.contactsMap();if(document.querySelector('.js-about-car'))this.aboutCar();if(document.querySelector('.js-about-line'))this.aboutLines();if(document.querySelector('.js-about-tab'))this.aboutTheatre();if(document.querySelector('.js-aside-sticky')){var sidebar=new StickySidebar('.js-aside-sticky',{containerSelector:'.page__withside',innerWrapperSelector:'.page__aside-sticky',topSpacing:20,bottomSpacing:0})}if((document.querySelector('.js-icar')||document.querySelector('.js-car'))&&window.touch&&window.xsHeight&&window.innerHeight<window.innerWidth){document.querySelector('html').classList.add('lock')}window.addEventListener('resize',function(){window.xs=window.innerWidth<=960?true:false;window.mobile=window.innerWidth<=480?true:false;window.xsHeight=window.innerHeight<=540?true:false});window.addEventListener('orientationchange',function(){setTimeout(function(){if(document.querySelector('.js-icar')&&window.touch&&window.xsHeight&&window.innerHeight<window.innerWidth){document.querySelector('html').classList.add('lock')}else{document.querySelector('html').classList.remove('lock')}},500)});window.addEventListener('scroll',function(){elemsToCheck.forEach(function(item){document.querySelectorAll(item).forEach(function(elem){if(window.animation.visChecker(elem)){elem.classList.add('visible')}})})});//shave(elem, 50); обрезка текста
//$('[data-fancybox]').fancybox(); // fancy init
this.resizeWatcher();var eventResize=new Event('resize');window.dispatchEvent(eventResize);var eventScroll=new Event('scroll');window.dispatchEvent(eventScroll);return this}};Pace.on('hide',function(){setTimeout(function(){window.agroculture.obj.init()},200)})})();